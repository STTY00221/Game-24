<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Å‡∏° 24 - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πà‡∏≤‡∏ô
        let levels = [
            { numbers: [3, 3, 8, 8] },
            { numbers: [2, 4, 6, 8] },
            { numbers: [1, 4, 6, 6] },
            { numbers: [2, 3, 4, 12] },
            { numbers: [4, 6, 6, 6] },
            { numbers: [1, 2, 8, 8] },
            { numbers: [3, 3, 4, 8] },
            { numbers: [2, 3, 6, 9] },
            { numbers: [2, 4, 8, 8] },
            { numbers: [3, 3, 6, 8] },
            { numbers: [1, 3, 6, 8] },
            { numbers: [2, 3, 7, 8] },
            { numbers: [4, 4, 6, 7] },
            { numbers: [2, 4, 7, 7] },
            { numbers: [1, 6, 6, 8] },
            { numbers: [2, 5, 7, 7] },
            { numbers: [3, 4, 6, 8] },
            { numbers: [2, 6, 7, 7] },
            { numbers: [1, 4, 8, 8] },
            { numbers: [3, 5, 6, 8] }
        ];

        // ‡∏™‡∏∏‡πà‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏î‡πà‡∏≤‡∏ô
        function shuffleLevels() {
            for (let i = levels.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [levels[i], levels[j]] = [levels[j], levels[i]];
            }
        }

        let currentLevel = 0;
        let timeLeft = 180;
        let timer;
        let isGameActive = true;

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        function evaluateExpression(expression) {
            try {
                // ‡∏•‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÅ‡∏Ñ‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏π‡∏ì
                expression = expression.replace(/\s+/g, '');
                if (!/^[\d\*]+$/.test(expression)) {
                    return { isValid: false, message: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏π‡∏ì (*)' };
                }

                const numbers = expression.match(/\d+/g)?.map(Number) || [];
                const operators = expression.match(/\*/g) || [];
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢
                if (numbers.length !== 2) {
                    return { isValid: false, message: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 2 ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏Ñ‡∏π‡∏ì‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ 24' };
                }

                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå
                const currentNumbers = levels[currentLevel].numbers;
                const validNumbers = numbers.every(num => currentNumbers.includes(num));
                if (!validNumbers) {
                    return { isValid: false, message: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô' };
                }

                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
                const result = eval(expression);
                
                if (Math.abs(result - 24) < 0.000001) {
                    return { isValid: true, result: 24 };
                }
                
                return { isValid: false, message: '‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 24' };
            } catch (error) {
                return { isValid: false, message: '‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á' };
            }
        }

        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = formatTime(timeLeft);
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    isGameActive = false;
                    document.getElementById('timeout-dialog').classList.remove('hidden');
                }
            }, 1000);
        }

        function updateGame() {
            document.getElementById('level-number').textContent = currentLevel + 1;
            const numbersContainer = document.getElementById('numbers-container');
            numbersContainer.innerHTML = '';
            
            levels[currentLevel].numbers.forEach(number => {
                const numberDiv = document.createElement('div');
                numberDiv.className = 'text-white text-2xl font-bold rounded-xl p-4 text-center shadow-md aspect-square flex items-center justify-center bg-gradient-to-r from-blue-500 to-purple-500 transform hover:scale-105 transition-transform duration-200';
                numberDiv.textContent = number;
                numbersContainer.appendChild(numberDiv);
            });

            document.getElementById('answer-input').value = '';
            document.getElementById('message').textContent = '';
            timeLeft = 180;
            isGameActive = true;
            startTimer();
        }

        function checkAnswer() {
            if (!isGameActive) return;

            const answer = document.getElementById('answer-input').value;
            const result = evaluateExpression(answer);
            const messageElement = document.getElementById('message');
            
            if (result.isValid) {
                messageElement.textContent = '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! üéâ';
                messageElement.className = 'text-green-600 font-medium';
                
                if (currentLevel < levels.length - 1) {
                    currentLevel++;
                    setTimeout(updateGame, 1500);
                } else {
                    clearInterval(timer);
                    isGameActive = false;
                    messageElement.textContent = '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß! üèÜ';
                }
            } else {
                messageElement.textContent = result.message;
                messageElement.className = 'text-red-600 font-medium';
            }
        }

        function retryLevel() {
            document.getElementById('timeout-dialog').classList.add('hidden');
            updateGame();
        }

        window.onload = function() {
            shuffleLevels(); // ‡∏™‡∏∏‡πà‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏î‡πà‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
            updateGame();
            
            document.getElementById('answer-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
        };
    </script>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-md mx-auto">
            <a href="index.html" 
               class="inline-flex items-center text-blue-600 hover:text-blue-700 mb-4">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
            </a>

            <div class="bg-white rounded-xl shadow-2xl p-6">
                <div class="flex justify-between items-center mb-6">
                    <div class="flex items-center gap-2">
                        <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                        </svg>
                        <h1 class="text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                            ‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà <span id="level-number">1</span>
                        </h1>
                    </div>
                    <div class="flex items-center gap-2">
                        <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <div id="timer" class="text-xl font-mono font-bold text-blue-500">
                            3:00
                        </div>
                    </div>
                </div>

                <div id="numbers-container" class="grid grid-cols-2 gap-3 mb-6">
                    <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
                </div>

                <div class="space-y-3">
                    <input
                        type="text"
                        id="answer-input"
                        placeholder="‡πÉ‡∏™‡πà‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÄ‡∏ä‡πà‡∏ô 3 * 8"
                        class="w-full text-lg py-4 px-4 border-2 border-blue-200 focus:border-blue-400 rounded-lg outline-none"
                    >

                    <button 
                        onclick="checkAnswer()"
                        class="w-full py-4 text-lg text-white bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 rounded-lg transition-all duration-200"
                    >
                        ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                    </button>

                    <p id="message" class="text-center font-medium"></p>
                </div>
            </div>

            <div class="mt-4 text-center text-gray-600 bg-white rounded-lg p-4 shadow-md">
                <p>‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏Ç‡∏ó‡∏±‡πâ‡∏á 4 ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡∏ï‡∏±‡∏ß‡πÉ‡∏î‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ñ‡∏π‡∏ì‡∏Å‡∏±‡∏ô‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ 24</p>
                <p class="mt-2">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏Ç [3, 3, 8, 8] ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 3 * 8</p>
                <p class="mt-2 font-medium">(‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏Ç‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)</p>
            </div>
        </div>
    </div>

    <!-- Dialog ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ -->
    <div id="timeout-dialog" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-6 m-4 max-w-sm w-full">
            <h3 class="text-xl font-bold text-red-500 mb-4">
                ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!
            </h3>
            <p class="text-lg text-gray-700 mb-6">
                ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á‡∏î‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
            </p>
            <button 
                onclick="retryLevel()"
                class="w-full py-4 text-lg text-white bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 rounded-lg transition-all duration-200"
            >
                ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
            </button>
        </div>
    </div>
</body>
</html>
